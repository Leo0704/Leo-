# 无限开发工作流

## 核心概念

这是一个**状态驱动**的开发工作流，让 Claude Code 可以跨会话持续开发。

**关键点：不需要额外的 API Key，直接在 Claude Code 中运行！**

## 工作原理

```
┌─────────────────────────────────────────────────────────┐
│                    Claude Code 会话                      │
│                                                          │
│  1. 读取 .workflow/status.json（当前状态）              │
│  2. 读取 .workflow/tasks.json（待办任务）              │
│  3. 执行一个任务                                        │
│  4. 更新状态文件                                        │
│  5. 如果还有任务，说"继续"让 AI 继续工作               │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

## 快速开始

### 方式一：直接在 Claude Code 中使用

1. 把 `WORKFLOW.md` 的内容作为系统提示给 Claude
2. Claude 会自动读取状态、执行任务、更新进度
3. 会话结束时说"继续"，Claude 会从上次进度继续

### 方式二：使用启动命令

```
请阅读 .workflow/STATUS.md 并继续工作
```

## 目录结构

```
项目目录/
├── .workflow/
│   ├── STATUS.md          # 当前状态（人类可读）
│   ├── status.json        # 当前状态（机器可读）
│   ├── tasks.json         # 任务列表
│   ├── decisions.md       # 技术决策记录
│   └── sessions/          # 会话记录
│       ├── session-001.md
│       └── session-002.md
├── src/                   # 源代码
├── tests/                 # 测试
└── README.md
```

## 状态文件

### STATUS.md（人类可读）

```markdown
# 项目状态

## 当前进度
- 总任务: 20
- 已完成: 5
- 进行中: task-006

## 正在做
- task-006: 实现用户登录功能

## 下一步
- task-007: 添加登录表单验证
- task-008: 连接后端 API

## 最后更新
2024-01-15 10:30
```

### status.json（机器可读）

```json
{
  "total_tasks": 20,
  "completed": 5,
  "current_task": "task-006",
  "last_update": "2024-01-15T10:30:00Z",
  "next_actions": [
    "task-007: 添加登录表单验证",
    "task-008: 连接后端 API"
  ]
}
```

### tasks.json（任务列表）

```json
{
  "tasks": [
    {
      "id": "task-001",
      "title": "项目初始化",
      "status": "completed",
      "priority": 1
    },
    {
      "id": "task-006",
      "title": "实现用户登录功能",
      "status": "in_progress",
      "priority": 10,
      "description": "实现用户登录，包括表单、验证、API调用",
      "steps": [
        "创建登录页面组件",
        "添加表单验证",
        "实现 API 调用",
        "处理登录状态"
      ]
    }
  ]
}
```

## 使用流程

### 开始新项目

告诉 Claude：

```
我要创建一个 [项目描述] 项目。
请帮我：
1. 初始化 .workflow/ 目录
2. 创建任务列表
3. 开始第一个任务
```

### 继续开发

每次新会话开始时说：

```
继续开发 [项目名]
```

或者：

```
请阅读 .workflow/STATUS.md 并继续工作
```

### 结束会话

Claude 会自动：
1. 更新 STATUS.md
2. 记录会话到 sessions/
3. 提交 Git

## 最佳实践

1. **任务粒度适中** - 每个任务 30 分钟内可完成
2. **及时提交** - 完成一个任务就 commit
3. **记录决策** - 重要决策写入 decisions.md
4. **保持状态更新** - 每次会话结束更新 STATUS.md

## 与普通开发的区别

| 普通开发 | 无限工作流 |
|---------|----------|
| 记在脑子里 | 记在文件里 |
| 会话结束可能忘 | 状态持久化 |
| 需要重新解释上下文 | 自动读取状态继续 |
| 一次性 | 无限循环 |
