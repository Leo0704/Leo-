---
description: 查看当前工作流进度状态（集成原生 Task）
---

# 查看工作流状态

## 第一步：读取原生任务

使用 **TaskList** 工具获取当前所有任务。

## 第二步：读取验收标准

从 `.workflow/criteria.json` 读取任务的验收标准。

## 第三步：显示状态

```
==================================================
  目标驱动工作流（原生 Task 集成）
==================================================

进度: 2/5 (40%)
进行中: 1 | 待办: 2 | 已完成: 2

当前任务:
  [1] Fix PaymentOrder model conflicts
  状态: in_progress
  验收: 1/1 通过
    ✅ 修复漏洞 (manual)

待处理任务:
  [2] 实现用户认证
    状态: pending
    阻塞: 无
    验收标准: 2 项

  [3] 编写 API 文档
    状态: pending
    阻塞: [2] (等待实现用户认证完成)

已完成任务:
  [4] 设置项目结构
  [5] 配置开发环境

==================================================
```

### 显示规则

1. **排序**：in_progress → pending → completed
2. **验收标准**：
   - 显示通过进度：`X/Y 通过`
   - 用 ✅/❌ 标记每条标准
3. **依赖关系**：
   - 如果有 blocked_by，显示"等待: XXX"
   - 如果有 blocks，显示"阻塞: XXX"
4. **任务历史**（如果启用）：
   - 从 `.workflow/config.json` 读取 `enable_task_history`
   - 如果为 true，显示任务的状态变更历史
   - 格式：时间戳 - 状态 - 说明

---

## 简化版（如果 TaskList 不可用）

如果 TaskList 工具不可用，直接读取 `.workflow/state.json`：
1. 读取 state.json
2. 显示任务列表和进度
3. 显示验收标准状态
